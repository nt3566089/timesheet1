## ジョブ削除制限(CH12703)  ■DMP XIII-1a以降は「08.10 ジョブ操作制限」を参照のこと■
COユーザーに対して、ジョブの中止(削除する操作)を制限する事が出来る。

[8.10 ジョブ削除制限(CH12703)
1](#ジョブ削除制限CH12703-dmp-xiii-1a以降は08.10-ジョブ操作制限を参照のこと)

[8.10.1. 動作 1](#動作)

**<上位仕様と本章>**

■FF と本章

システム基本仕様書 3-02-07 Job Managementに書かれる。

『1.4.1ジョブ操作定義』を参照の事。

■UI Dialogue Concept and Basic Behaviorと本章

特に記載なし

■関連するUI-DFD

08
Job ……全般 ジョブキャンセルに関する記述がある場合、こちらのDFDが優先される。

14Timer……    ジョブキャンセルタイマー

**< 用語の定義など>**

-   ジョブの中止とは、ジョブを削除する操作である。ジョブのポーズ(一時停止)する操作の制限ではない。

-   削除制限コンファーム画面
正しくはDialogue仕様書をご参考ください

### 動作

**<動作>**

COユーザーは、システムデータによりジョブの中止を制限される場合がある。

この場合、削除制限コンファーム画面を表示して、ユーザーに中止が出来ない旨を表示する。
実装参考情報…

UIでは通常のジョブキャンセル要求を行う。

その結果として、コントローラ側から、中止制限NGが返される。

KOユーザーは、認証モード/システムデータ設定に関わらずジョブ削除は可能とする。
参考…

SAおよびCEはKOと同様にジョブ削除制限がかかっていてもジョブ削除可である。

KOのみジョブ削除可の場合であってもJobCancelTimerによってジョブはキャンセルされるものとする。
実装参考情報…

タイマータイムアップによるジョブキャンセル要求なのか、ユーザー操作によるキャンセルなのかはUIで判断することが出来る。よって、この種別と共にジョブキャンセル要求する。

その結果として、コントローラ側から、ジョブキャンセルOKが返される。

**<システムデータ>**

|項目|設定範囲・備考|備考|
|---|---|---|---|
|Operation Permission - Job Cancel|"制限無し"、"制限有り"||


**<制限・注意事項/備考>**

**<参考資料>**

-   CH12703

-   

**Appendix (Q&A)**

# 本項では、以下の理由から、質疑・背景等を記載します。

UI-DFDには、「要求仕様」と「実装仕様」が書かれています。

その仕様が、要求仕様としてはここまで求めたかったが、実装上の理由で、あるいは他の何らかの理由で、このような仕様に落ち着いた…という経緯も大切な情報です。

レビューの場では、「それをどうやって実現できるか」という事が話し合われます。その時話し合われた実現概要や懸念点に対する回答は重要な情報です。そして、実現概要を決める際には、Resource
(JRMIFあるいはControllerから取得できる情報)が登場します。UIが取得できるResourceが変われば、仕様にも影響します。ですので、Resource
の(詳細についてはDFD以降の設計書で書かれるとして)
概要については、DFDの中で触れる場合があります。

――――――――――――――――――――――――――――――――――――――

Q:ジョブをキャンセルする画面は、ラン画面のほかにも、フォルトやストップポーズやPausedJobDeleteConfrim画面などがありますが、それらからキャンセル操作した場合も、制限の対象でしょうか?

A:対象です。ですので、ステータスメッセージではなく、下の画面を覆う事の出来る画面で対応しています。

――――――――――――――――――――――――――――――――――――――

Q:MNでは、HeldJobと呼んでいる、保存文書を1タブ目に表示する機能があります。

HeldJobは名前こそJobとつきますが、実態は単に文書が存在している状態ですが、この場合はどうなりますか?

A:はい。MNの保存文書を1タブ目に表示する対応のHeldJob状態で、削除指示した場合は、削除制限対象になります。

外部仕様的に、『ジョブ』という表現で扱っているためです。

しかしこの場合、コントローラー的にはジョブなっていませんので、先の補足に書いたジョブキャンセル要求の仕組みは使用できません(ジョブになっていないのでUIからジョブキャンセル要求できません)。

よってUI自身で、HeldJobの削除
且つ NVMで制限されている を判断し、削除制限コンファームを表示しています。

――――――――――――――――――――――――――――――――――――――

Q:上記、HeldJob
が対象ですと、3タブ目の保存文書の削除も禁止対象でしょうか?

A: いいえ。こちらはジョブではなく文書の削除、という扱いと捕らえ、削除制限の対象にしません。

――――――――――――――――――――――――――――――――――――――