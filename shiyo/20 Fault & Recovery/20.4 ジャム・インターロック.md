## ジャム・インターロック表示
本章では、ジャム画面の共通的な仕様について記載する。インターロック画面の共通的な仕様について記載する。

**<目次>**

[20.4 ジャム・インターロック表示
1](#ジャムインターロック表示)

[20.4.1. Jam画面を表示する 2](#jam画面を表示する)

[20.4.2. Interlock画面を表示する
2](#interlock画面を表示する)

[20.4.2.1. 制限 3](#制限)

**エラー! ブックマークが定義されていません。**APPENDIX

**<上位仕様と本章>**

■FF Fault分類と と本章

3-02-02 Fault Management
システム基本仕様書に書かれているFault分類のうち、本章では、次の分類を記述対象とする。

|FF Fault分類|本章の対象|UI表示||
|---|---|---|---|---|
||サブ分類|||
|SystemFail||X|-|
|SubSystemFail||X|-|
|SerivceFail||X|-|
|LocalFail||X|-|
|JobFail||X|-|
|Jam|Static|○|ジャム画面の表示を行う※|
||Dynamic|○|ジャム画面の表示を行う※|
|DeviceError|Interlock|○|インターロック画面の表示を行う|
||- (Interlock以外)|X||
|OperationError||X|-|
|Notice||X|-|
|Record||X|-|
|Warning||X|-|
|info||X|-|


                                                      ※UIでは、StaticJam/DynamicJamを区別しない。

■UI Dialogue Concept and Basic Behaviorと本章

UI Dialogue Concept and Basic
Behaviorには次のような方針が書かれている。『4.12.2
Fault分類と表示パターン』

|Basic Behavior|UI表示|
|---|---|---|
|Jam|ジョブ中/ジョブ中以外を問わずJamポップアップで対応。|
|Device Error(Interlock)|ジョブ中/ジョブ中以外を問わずInterlockポップアップで対応。|


                   

■関連するUI-DFD

|UI-DFD|関連する内容|
|---|---|---|
|20章 Fault&amp;Recovery|Fault&amp;Recovery全般|
|09章 MCStatus|ActiveFault|
|13章 Alarm|LEDの状態、異常を知らせる音|
|||


**< IitState･IotState のZone通知 について >**
Jamの状態/Interlockの状態は、IitStateまたはIotStateのZoneとしてUIに通知される。
UIでは、通知Zoneに対応したの画面表示をおこなう。これらはジャムクリア検討会で決定される。

**< 用語について >**
下図参照
>
### Jam画面を表示する

**<基本仕様>**

-   IitStateにて、JamZoneが通知された場合、Jam画面の表示を行う。

-   IotStateにて、JamZoneが通知された場合、Jam画面の表示を行う。

-   Iit内で独自に表示優先度が設けられており、優先度はiit側(含むCont側)で決定される。同様にIot側も独自に表示優先度が設けられている。

-   Iit/iot両方で発生している場合は、IIT側を優先して表示する。これはUI側で通知されている情報を元に表示制御を行う。

**<詳細仕様1: 画面表示に関する仕様>**

-   IitStateにて、JamZoneが通知された場合、Jam画面の表示を行う。

-   IotStateにて、JamZoneが通知された場合、Jam画面の表示を行う。

-   画面が表示できる状態であれば(※)、通知を受けた時点で表示をおこなう。
参考…

SystemFail発生中や初期化中などで、通知を受けても表示されない場合がある。

(ジャムに限らず、全体のフレーム調停については別途記載する)。

-   ジョブ中に発生した場合も、通知を受けた時点で表示させる。その後、ジョブが停止した際にジョブとジャムが関連あると判断されれば、ジョブと結びつけを行う。
参考…

この動作により、一旦は「中止メッセージ」の無いジャム画面が表示されるが、その後ジョブ停止を受けてから、ジョブとの結びつけを行い、「中止する時はCボタン押せ」という中止メッセージが画面内に表示される場合がある。

**<詳細仕様2: フレーム内のオブジェクトに関する仕様>**

■部分図

部分図はZoneに従い表示をおこなう。

一部の部分図においては、UI側でConfigを判断し表示を切り替えているものがある。

Zoneと表示(ダイアログ)の対応付けは、ダイアログ仕様書参考のこと。

■全体図

全体図は、UI側で表示制御を行う。

取得しているConfig情報からデバイス全体構成を作成し、対象位置(赤くする部分)はJamZoneから決定する。

■閉じるボタン

\[閉じる\]ボタンは常に表示する。

ラン画面と結びついた場合はラン画面の閉じるボタンの仕様に従う。
参考…

基本的にはラン画面の閉じるボタンと同じ条件で、Enable/Disable制御を行う

マニュアル製本画面にエントリー中の場合、
IOT関連の\[閉じる\]ボタンはDisable表示とする。
参考…

PBフォルト中は、マニュアル製本画面>マニュアルモードに遷移できない制限がある。この為、\[閉じる\]ボタンでフォルト画面を閉じさせると、マニュアルモード遷移時になぜ遷移できないのかが解らなくなる恐れがある。この対応として\[閉じる\]ボタンを消し、ボタンでは閉じれない事とした。「BG160241:くるみ:マニュアル製本の\[次へ\]ボタンがNGになるケースがあるが、その理由がわかりにくい」参照。

Arcade
Mode(システムデータ)で、且つ認証状態がKO/CE以外(未認証)の時は、\[閉じる\]ボタンは非表示とする。(CH23249)

■中止メッセージ

DMP6-3以降、ジョブ中は常に「中止メッセージ」を表示する。(CH12350)

ジョブの種別=PGS2035SGPPrintJob 且つ システムデータで
『中止メッセージ表示しない』 になっている場合、「中止メッセージ」は表示しない。(CH20087)

またこの場合、『Cキー』『リセットキー』は共に受け付けない。

■原因JamCode

通知されたJamCodeを表示する。

**<その他>**

### Interlock画面を表示する

**<基本仕様>**

-   IitStateにて、Zoneが通知された場合、インターロック画面の表示を行う。

-   IotStateにて、Zoneが通知された場合、インターロック画面の表示を行う。

-   Iit内で独自に表示優先度が設けられており、優先度はiit側(含むCont側)で決定される。同様にIot側も独自に表示優先度が設けられている。

-   Iit/iot両方で発生している場合は、IIT側を優先して表示する。これはUI側で通知されている情報を元に表示制御を行う。

**<詳細仕様1: 画面表示に関する仕様>**

-   IitStateにて、Zoneが通知された場合、インターロック画面の表示を行う。

-   IotStateにてZoneが通知された場合、インターロック画面の表示を行う。

-   画面が表示できる状態であれば(※)、通知を受けた時点で表示をおこなう。
参考…

SystemFail発生中や初期化中などで、通知を受けても表示されない場合がある。

(インターロックに限らず、全体のフレーム調停については別途記載する)。

-   ジョブ中に発生した場合も、通知を受けた時点で表示させる。その後、ジョブが停止した際にジョブとインターロックが関連あると判断されれば、ジョブと結びつけを行う。
参考…

この動作により、一旦は「中止メッセージ」の無いインターロック画面が表示されるが、その後ジョブ停止を受けてから、ジョブとの結びつけを行い、「中止する時はCボタン押せ」という中止メッセージが画面内に表示される場合がある。

**<詳細仕様2: フレーム内のオブジェクトに関する仕様>**

■部分図

部分図はZoneに従い表示をおこなう。

一部の部分図においては、UI側でConfigを判断し表示を切り替えているものがある。
参考…

例として、LhCoverでは、

- 本体構成のみの場合・・・・・・本体の左カバーを空ける表示ですが、

- 本体+HCF構成の場合.・・・・HCF側から本体のカバーを開けさせる表示にする

Zoneと表示(ダイアログ)の対応付けは、ダイアログ仕様書参考のこと。

■全体図

全体図は、UI側で表示制御を行う。

取得しているConfig情報からデバイス全体構成を作成し、対象位置(赤くする部分)はZoneから決定する。

■閉じるボタン

\[閉じる\]ボタンは常に表示する。

ラン画面と結びついた場合はラン画面の閉じるボタンの仕様に従う。
参考…

基本的にはラン画面の閉じるボタンと同じ条件で、Enable/Disable制御を行う

マニュアル製本画面にエントリー中の場合、
IOT関連の\[閉じる\]ボタンはDisable表示とする。
参考…

PBフォルト中は、マニュアル製本画面>マニュアルモードに遷移できない制限がある。この為、\[閉じる\]ボタンでフォルト画面を閉じさせると、マニュアルモード遷移時になぜ遷移できないのかが解らなくなる恐れがある。この対応として\[閉じる\]ボタンを消し、ボタンでは閉じれない事とした。「BG160241:くるみ:マニュアル製本の\[次へ\]ボタンがNGになるケースがあるが、その理由がわかりにくい」参照

Arcade
Mode(システムデータ)で、且つ認証状態がKO/CE以外(未認証)の時は、\[閉じる\]ボタンは非表示とする。(CH23249)

■中止メッセージ

DMP6-3以降、ジョブ中は常に「中止メッセージ」を表示する。(CH12350)

ジョブの種別=PGS2035SGPPrintJob 且つ システムデータで
『中止メッセージ表示しない』 になっている場合、「中止メッセージ」は表示しない。(CH20087)

またこの場合、『Cキー』『リセットキー』は共に受け付けない。

■エラーコードChainLink

インターロック画面ではフォルトコードを表示しますが、IIT系のインターロックは一意にZoneに対応するChainLink番号を取得できないため、UI側でChainLinkを対応づけて表示しています。

対応付けは次の通り。

**<その他>**

#### 制限

IIT
PlatenCoverは、DADFに原稿が乗っている場合のみ表示を行う。この判断はUI側で行う。

DadfClean画面表示中は、プラテンカバーオープンを出さない。
参考…

クリーニング手順が消えてしまうため。

特定のエラーが発生している場合、インターロック画面を表示しない場合がある。これは、交換手順等が、インターロック画面によって消されてしまうのを防ぐためである。対象画面はAppendix参照の事。