## 言語切り替え

本章では、言語切り替えの機能について記述する。

### 対応言語の種類
###### 動作/内容
複数言語をいくつかの言語グループに分け、仕向地毎に言語グループ単位でデバイスに実装する。  
これは、対応する言語のフォントとメッセージ情報をデバイス内に保持する必要があり、すべての言語を同時に実装することが困難である為。  
グループ分けは以下の通り。

表1. デバイスの言語グループ

|言語グループ|対応言語(*は、デフォルト言語)|対応市場|備考|
|---|---|---|---|---|
|日本語 |日本語*<br />英語|日本|<ul><li>同じ言語グループは、同じROMで対応することを推奨する。<br/></li><li>左記のデフォルト言語はROMのデフォルト値で、仕向地毎に変更必要な場合、工場または設置時に必要に応じて変更可能<br/></li></ul>|
|アジア(日本以外)、<br />オセアニア|英語*<br />中国語簡体<br />中国語繁体<br />ハングル<br/>タイ語<br/>日本語1<br/>ベトナム語(CH28182)<br/>インドネシア語(CH46635)<br/>|AP、GCO||
|欧州、アメリカ、アフリカ、<br />中東等|**English** (英語) *<br/>**French** (フランス語)**<br />Italian** (イタリア語)**<br />German** (ドイツ語)<br/>**Spanish** (スペイン語)<br/>**European Portuguese** (ヨーロッパ系ポルトガル語)<br/>**Brazilian Portuguese** (ブラジル系ポルトガル語)<br/>**Dutch** (オランダ語)<br/>**Swedish** (スウェーデン語)<br/>**Norwegian** (ノルウェー語)<br/>**Danish** (デンマーク語)<br/>**Finnish** (フィンランド語)<br/>**Russian** (ロシア語)<br/>**Bulgarian** (ブルガリア語)<br/>**Polish** (ポーランド語)<br/>**Hungarian** (ハンガリー語)<br/>**Romanian** (ルーマニア語)<br/>**Czech** (チェコ語)<br/>**Greek** (ギリシャ語)<br/>**Turkish** (トルコ語)<br/>**Arabic** (アラビア語)<br/>**Farsi** (ファージ語=イランの国語)<br/>**Hebrew** (ヘブライ語)<br/>**Catalonia**(カタロニア語:CH14721、CH15367)<br/>**Ukrainian**(ウクライナ語:CH20788)<br/>|PGS1002SGP市場<br />(PGS2004SGP,OSG)||

<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>RF963: UI言語表示の拡張(現状の4言語(English, TC, SC, Korean)に日本語追加)<br />
CH18500: UI言語表示の拡張(IBGでの日本語対応)↩</p></li>
</ol>
</section>

プロダクト毎に対応する言語は「Features&Functions編
Globalization」を参照。

###### 制限・注意事項/備考

### 言語の設定

###### 概要

言語の設定には、KO設定(言語情報)とCO設定(カレント言語)の二種類がある。

-   言語情報(KO設定)
電源ON時のデフォルト言語。  
電源OFF/ON後も設定が保持される。

-   カレント言語(CO設定)
電源ON後にユーザーが切り替え可能な言語。  
電源OFF/ON後は設定が無効になる。  
UIを含め、各種サービスは、この設定に従い動作する。

###### 動作

カレント言語は、以下のタイミングでUIが設定する。

1.  電源ON時  
    > 言語情報を参照し、設定する。  
    > 言語情報に設定されている言語が使用できない場合、以下の通りに設定する。  
    > ・日本市場では日本語  
    > ・それ以外では英語

2.  言語切り替え時  
    > ユーザー指定に従い、設定する。

###### システムデータ

|項目|設定|デフォルト値|設定範囲|対応市場|備考|
|---|---|---|---|---|---|---|
|言語情報|KO|日本語|日本語, 英語|日本|設定範囲は、各プロダクトに実装する言語種類に依存する。|
|||英語|英語, 中国語簡体, 中国語繁体, ハングル, タイ語, 日本語1, ベトナム語(CH28182), インドネシア語(CH46635)|AP、GCO||
|||英語|英語<br/>フランス語**<br />**イタリア語**<br />**ドイツ語<br/>スペイン語<br/>ヨーロッパ系ポルトガル語<br/>ブラジル系ポルトガル語<br/>オランダ語<br/>スウェーデン語<br/>ノルウェー語<br/>デンマーク語<br/>フィンランド語<br/>ロシア語<br/>ブルガリア語<br/>ポーランド語<br/>ハンガリー語<br/>ルーマニア語<br/>チェコ語<br/>ギリシャ語<br/>トルコ語<br/>アラビア語<br/>ファージ語(イラン語)<br/>ヘブライ語<br/>カタロニア語(CH14721、CH15367)<br/>ウクライナ語(CH20788)<br/>|PGS1002SGP市場<br />(PGS2004SGP,OSG)||
|カレント言語|CO|日本語|日本語, 英語|日本|設定範囲は、各プロダクトに実装する言語種類に依存する。|
|||英語|英語, 中国語簡体, 中国語繁体, ハングル, タイ語, 日本語2, ベトナム語(CH28182), インドネシア語(CH46635)|AP、GCO||
|||英語|英語<br/>フランス語**<br />**イタリア語**<br />**ドイツ語<br/>スペイン語<br/>ヨーロッパ系ポルトガル語<br/>ブラジル系ポルトガル語<br/>オランダ語<br/>スウェーデン語<br/>ノルウェー語<br/>デンマーク語<br/>フィンランド語<br/>ロシア語<br/>ブルガリア語<br/>ポーランド語<br/>ハンガリー語<br/>ルーマニア語<br/>チェコ語<br/>ギリシャ語<br/>トルコ語<br/>アラビア語<br/>ファージ語(イラン語)<br/>ヘブライ語<br/>カタロニア語(CH14721、CH15367)<br/>ウクライナ語(CH20788)<br/>|PGS1002SGP市場<br />(PGS2004SGP,OSG)||

<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>RF963: UI言語表示の拡張(現状の4言語(English, TC, SC, Korean)に日本語追加)<br />
CH18500: UI言語表示の拡張(IBGでの日本語対応)↩</p></li>
<li id="fn2"><p>同上↩</p></li>
</ol>
</section>

###### 制限・注意事項/備考
- カレント言語(CO設定)は、Imari/Carrera/Allagashには無い。
- 言語情報に設定されている言語が使用できない場合として、以下がある。  
実装されていない言語が設定されている。  
使用が制限されている言語が設定されている。「21.7.6
言語の使用制限」参照。

### 言語切り替え手段

###### 動作/内容

言語切り替えの手段として、以下の手段がある。

-   言語情報変更による切り替え
電源ON時のデフォルト言語を切り替える。

-   カレント言語変更による切り替え
画面表示 および 各種サービスで使用する言語を切り替える。  
切り替える方法として、以下の方法がある。  
-
コントロールパネル上の言語切り替え専用キー(ハードキー)による切り替え  
- メニュー画面内の言語切り替えボタン(ソフトボタン)による切り替え

言語切り替えの手段/方法はプロダクトに依存する。以下にプロダクト別の切り替え方法を示す。

表3. プロダクト別言語切り替え方法

|**プロダクト**|**言語情報切り替え**|**カレント言語切り替え**|**カレント切り替え方法**|
|---|---|---|---|---|
|Imari|○|×|-|
|Carrera|○|×|-|
|Allagash|○|×|-|
|Kutani|○|○|ソフトボタン|
|PGS7018SGP(FX, AP)|○|○|ソフトボタン|
|PGS7018SGP(PGS1002SGP, PGS2003SGP)|○|○|ハードキー|
|Fuhjin以降|○|○|ソフトボタン(FX/AP,GCO)ハードキー(PGS1002SGP/PGS2003SGP)|


○:切り替えあり / ×:切り替えなし

言語切り替え専用キーが無効となる条件は Dialog 仕様書 「10.60
Hardkey受付」を参照。

###### Kutani,PGS7018SGP, Fuhjin以降からDMP2009-2bまでの制限事項

-   カレント言語切り替え処理は、ジョブ規制有りのKO
    > TOOLSモードにて実行する。

-   割り込みモードでは、カレント言語切り替え処理は禁止。

###### DMP2009-3a以降の制限事項[1]

-   カレント言語切り替え処理は、Normal モードにて実行する。

-   カレント言語切り替え処理実行時にジョブが存在したときは、言語切り替えはできない。

### 言語切り替え画面

###### 動作/内容

言語切り替え画面では、言語を変更するためのボタンはその言語で表現する。

例) 日本語と英語を切り替え可能な場合は、以下のように表現する。

日本語  
English

以下のように表現してはいけない。

日本語

英語

言語切り替え画面上に操作ボタンやガイドメッセージを表示する場合は、表示可能ならば、その時点で選択している言語で表示する。  
表示不可能ならば、切り替え前の言語で表示する。

ただし、言語選択のボタンはこの対象ではない。

例)
言語切り替え画面で、「英語」のボタンが選択された場合、ステータスメッセージは「英語」で表示する。  
また、画面を消去するための「閉じる」「取り消し」ボタンは「Save」「Cancel」と表示する。

###### 制限・注意事項/備考

### 言語の組み合わせ

###### 動作/内容

プロダクト毎にROMとして提供する言語の組合わせは「Features&Functions編
Globalization」を参照。

###### 制限・注意事項/備考

-   複数の言語を搭載している場合、Panelがシステムのデフォルト言語を正しく認識するまでは、Panelの言語ROMのデフォルト言語でメッセージ等の表示を行う(HBとFCWの初期化シーケンスの違いにより、相互のデフォルト言語を認識するタイミングに差異あり)。  
    > 例)
    > 日本語、英語を搭載している言語ROM(言語ROMのデフォルトは日本語)を使用し、システムデータで言語を英語に設定してもグリーティング画面には、  
    > 必ず、「お待ちください…」のメッセージが表示される。「Please Wait
    > …」のメッセージは表示されない。

-   Panelがシステムのデフォルト言語を正しく認識する前にSystem Fail
    > が発生した場合、Panelの言語ROMのデフォルト言語でメッセージ等の表示を行う(HBとFCWの初期化シーケンスの違いにより、相互のデフォルト言語を認識するタイミングに差異あり)。  
    > 例)
    > 日本語、英語を搭載している言語ROM(言語ROMのデフォルトは日本語)を使用し、システムデータで言語を英語に設定しても初期化中にSystem
    > Failが  
    > 発生すると、故障の画面のメッセージは日本語で表示される。

-   アウトラインフォント対応(RF5866/CH26873)による注意制限事項  
    > RF5866/CH26873で導入されたアウトラインフォントの文字(グリフ)は、Unicode6.3.0におけるU+0000～U+FFFFの範囲となる。
カレント言語(CO設定)に合わせて置き換えられるメッセージ情報(固定メッセージ)は、同様に置き換えられるビットマップフォント(従来通り)を用いるためにアウトラインフォントが利用されることは無い。
外部より与えられたメッセージ情報(上記固定メッセージ以外)にカレント言語(CO設定)で利用されているビットマップフォント(従来通り)に存在しない文字(グリフ)が含まれていた場合、RF5866/CH26873で導入されたアウトラインフォントを用いた表示を行なう。
このとき、タイ語(U+0E00～U+0E7F)の表示処理ではグリフの合成を行なうため、表示される文字に一部の欠け・潰れが生じる場合がある。
カレント言語(CO設定)がタイ語に設定されていれば、ビットマップフォント(従来通り)が利用されるため表示される文字に欠けや潰れは生じない。

### 言語の使用制限

###### 動作/内容

ROM内に実装している各々の言語に対して、使用可否を設定できる。  
「制限する」に設定された言語は、言語切り替え時に表示/選択できない。

###### システムデータ

|項目|設定|デフォルト値|設定範囲|備考|
|---|---|---|---|---|---|
|第1言語使用制限|CE|制限しない|制限しない(言語表示/選択可能)<br />制限する(言語表示/選択禁止)||
|第2言語使用制限|CE|制限しない|制限しない(言語表示/選択可能)<br />制限する(言語表示/選択禁止)||
|:|:|:|:||
|第32言語使用制限|CE|制限しない|制限しない(言語表示/選択可能)<br />制限する(言語表示/選択禁止)||


  1～32は、ROM内に実装されている言語の順番。  
実装されていない言語を制限しても無視される。

###### 制限・注意事項/備考

この機能は、Kutani,PGS7018SGP, Fuhjin以降実装する。

[1] CH19912:
###### DMP2009-3a以降共通言語切り替え時にジョブ規制ありのKO Tools
Modeに移行しないようにする