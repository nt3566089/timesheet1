# BMLinkS

## Overview

###### 概要

BMLinkSとは社団法人
ビジネス機械・情報システム産業協会が策定した、OA機器においてジョブや機器の制御を統一的に行うためのインターフェース仕様である。

次の3つの領域に関して標準化が行われている。

1) Discovery OA機器の探索に関する標準化

2) Data Format OA機器が授受するデータフォーマットに関する標準化

3) Job/Device Control OA機器の制御に関する標準化

BMLinkS機能の対象サービスは4つ存在する。

それぞれの機能の概要は以下の通り。(ScanToPrint/PausedPrintは現在提供無し)

BMLinkS
ScanToStorageでは、デバイスUIを用い、ユーザーが指定したストレージサービスに、スキャンした原稿イメージデータの送信を行うクライアント機能(Push型Scan)を提供する。

BMLinkS
PullPrintでは、デバイスUIを用い、ユーザーが指定したストレージサービスよりイメージデータを受信し、印刷を行うクライアント機能(Pull型Print)を提供する。

BMLinkS ScanToPrint (TBD)

BMLinkS PausedPrint (TBD)

###### 対象範囲

-   BMLinkS機能の対象範囲は、DMP6-2以降のプロダクトである。

###### 機種固有情報

###### 参考資料

-   FF-PrintService別冊(BMLinks Pull Print)

-   FF-ScanService(BMLinkS)

-   FF-IOT Device Function

-   Concept and Basic Behavior

###### 制限･注意事項/備考

-   本章でHDDと記載される場合SDを含むものとする(RF3846 -
    SDCard対応)。

## 利用条件

###### 概要

-   BMLinkS機能の利用条件を以下に示す。


-   HDDが搭載されていること。

-   テリトリがFXであること。

-   MF構成であること。

-   BMLinkS Scan)  スキャン搭載時。

###### 制限･注意事項/備考

-   サービスの提供有無はセレクション(BMLinkS-ScanToStrage、BMLinkS-PullPrint)により提供される。

-   スキャン機能設定が『有効』に設定されている場合、BMLinkS
    Scan機能が利用可能。

## ディスカバリ・ブラウジング

###### 概要

-   ディスカバリ・ブラウジングには、以下の機能が存在する。


-   ネットワークよりストレージサービスを検索するディスカバリ機能。

-   ディスカバリ機能により得られたストレージサービスより、保存先またはファイルを検索するブラウジング機能。

-   ユーザー名、パスワードを用いた認証機能[1]。


-   ディスカバリは以下のマルチキャストチャンネルが使用される。

|項目|設定|設定値|
|---|---|---|---|
|アドレス|固定|239.255.255.250|
|ポート番号|固定|1900|


### ディスカバリ機能

###### 概要

-   ディスカバリ機能により検索されたストレージサービス一覧を表示する。

###### 動作/機能

-   ストレージサービスの指定は1つのみ。

-   指定したストレージサービスのサーバー詳細情報を表示する。

###### 制限･注意事項

-   ストレージサービスを指定していない場合、サーバー詳細情報を表示する動作は出来ない。

-   ストレージサービス検索中は、検索処理を中止出来ない。

-   ストレージサービス検索中は、BMLinkS PullPrintを起動出来ない。

-   ストレージサービス検索中は、BMLinkS Scanを起動出来ない。

-   ストレージサービス名の直接入力はDMP6-2ではサポートしない。

-   検索対象は書込み可能サービスのみとし、読み取り専用サービスは検索対象外とする。

-   ストレージサービスのソート切替は不可。

###### 備考

-   取得可能なストレージサービスの情報は最大250とし、最大数を越えた検索結果は破棄される。

-   ストレージサービス情報の取得は最終情報の取得から、システムデータに設定されたタイムアウト値で終了される。

-   ストレージサービス名にローカル文字コードに変換できない文字コードが含まれていた場合は、ディスカバリ対象外とし、一覧表示されない。

### ブラウジング機能

###### 概要

-   指定されたストレージサービス内のディレクトリ・ファイル一覧を表示する。

-   BMLinkS
    Scan/Printの保存先情報として、一覧表示したディレクトリ/印字対象ファイルを指定できる。

###### 動作/機能

-   ディレクトリ・ファイル一覧表示では、保存先または印字対象ファイルを選択可能。

-   BMLinkS
    Scanサービスで、ブラウジング機能を使用した場合は、ファイルは表示しない。(ディレクトリのみ表示)

-   ディレクトリの階層移動が可能。

-   ディレクトリ名/ファイル名、または日時で昇順/降順を指定したソートが可能[2]。
デフォルト値(CH12184)
ScanToStorage・・・ディレクトリ名/ファイル名で昇順
PullPrint・・・日時で降順(新しい順)

-   ファイル拡張子によるフィルタリングは、システムデータ[3]に基づいて動作される。(UIからフィルタリング指定はしない。)

###### 制限･注意事項

-   印字対象ファイルの指定は1つのみとする。

-   印字対象ファイル名の直接入力指定は、DMP6-2ではサポートしない。そのため、一覧数上限を超えた数のフォルダ/ファイルが同一フォルダ内に存在する場合、アクセスできないフォルダ/ファイルが存在する場合がある。

###### 備考

-   パス名からファイル拡張子までを含むフルパスの長さは最大250Byteで、これを超えるファイルはブラウジングの対象外となり、存在しないものと見なされる。

###### 機種固有情報

-   ソート切替機能は、FCW/MCW-UIのみ。

### 認証機能

###### 概要

-   BMLinkSでは指定する機器に応じて、認証が必要となる場合がある。ストレージサービスへの認証情報としてログイン名、パスワードをサポートする。

###### 動作/機能

-   ログイン名、パスワードの文字数は、0～32Byteの範囲。

###### 制限・注意事項

-   入力可能な文字は、ASCII。

## BMLinkS ScanToStorage

###### 概要

-   ディスカバリにより指定したストレージ(ディレクトリ)に、Scanした原稿を転送する。

### スキャン指示
パラメータについて、基本的には、ScanToSMBと同様である。(UI-DFD「4.Scan」を参照)
ここでは、BMLinkS ScanToStorageとScanToSMBの差異を以下に記載する。

#### 転送先指定

###### 概要

ディスカバリ・ブラウジング機能にて、ネットワーク転送先(パス)を指定する。

###### 選択範囲

指定先は1つのみ。

###### 初期値

指定なし

###### 制限・注意事項

-   ストレージサービスの指定がされていない場合、BMLinkS
    Scanジョブを起動することはできない。

-   ディスカバリ・ブラウジング機能に関しては、「32.3ディスカバリ・ブラウジング」を参照のこと。

#### ログイン名

###### 概要

ログイン名を入力する。

###### 選択範囲

0～32Byte

###### 初期値

設定なし

###### 制限・注意事項

-   入力可能な文字は、ASCII。

-   ログイン名とパスワード共に未入力状態の場合は、Job起動不可。(CH12019)

#### パスワード

###### 概要

パスワードを入力する。

###### 選択範囲

0～32Byte

###### 初期値

設定なし

###### 制限・注意事項

-   入力可能な文字は、ASCII。

-   ログイン名とパスワード共に未入力状態の場合は、Job起動不可。(CH12019)

#### 出力ファイル形式

###### 概要

出力ファイル形式を指定する。

###### 選択範囲

BMLinkS-TIFF(1ファイルマルチページ)、XDW、PDF

###### 初期値

KO Tools設定(ファイルフォーマットデフォルト)

###### 制限・注意事項

-   初期値について、該当するファイルフォーマットがない場合は、BMLinkS-TIFFを初期値とする。

-   BMLinkS-TIFFを指定した場合には、読み取り倍率を100%のみとする。
    (CH11917)

#### 転送先に既にファイルが存在していた場合の処理指定

###### 概要

指定されたストレージに既に同名のファイルが存在していた場合の処理を指定する。

###### 選択範囲

キャンセル、上書き

###### 初期値

キャンセル

###### 制限・注意事項

-   BMLinkS
    Scanではストレージドライバの仕様により『名前を変更して保存』はサポートしない。

-   初期値は他ScanServiceと異なる。

## BMLinkS PullPrint

###### 概要

-   ディスカバリにより得られた印字対象ファイルをデバイスに印刷する。

-   ジョブの多重度は1で、BMLinks PullPrintジョブ実行中は新たなBMLinks
    PullPrintジョブのサブミットが抑止される。

### プリント指示

BMLinks PullPrint で指定可能なパラメータについて以下に記述する。

#### 印字対象ファイル指定

###### 概要

印字対象ファイルを指定する。

###### 選択範囲

指定先は1つのみ。

###### 初期値

指定なし

###### 制限・注意事項

-   印字対象ファイルの指定がされていない場合、BMLinkS
    Printジョブを起動することはできない。

-   ディスカバリ・ブラウジング機能に関しては、「32.3ディスカバリ・ブラウジング」を参照のこと。

#### プリント部数指定

###### 概要

プリント部数を指定する。

###### 選択範囲

1～999部

###### 初期値

1部

###### 制限・注意事項

-   部数の入力ルールに関しては、Behavior Spec.を参照のこと。

#### ステープルの指定

###### 概要

後処理方法(ステープル有無)を指定する。

###### 選択範囲

針あり左上一ヵ所、針なし左上一ヵ所、ステープルしない

###### 初期値

ステープルしない

###### 制限・注意事項

-   針ありステープラ未装着時は、「針あり左上一ヵ所」は存在しない。

-   針なしホチキスユニット未装着時は、「針なし左上一ヵ所」は存在しない。「針なし左上一ヵ所」は針なしホチキスユニットのあるGB-Finisherが接続されている場合に提供する(RF11567)。

-   針ありステープラと針なしホチキスユニットが両方未装着の場合は本機能は存在しない(RF11567)。

-   -   「針あり左上一ヵ所」/「針なし左上一ヵ所」(RF11567)は、仕分け処理(コレート)の指定を、「ソート(Collate)」に変更する。

-   ステープラ状態(ステープラダストボックス含む)により、出力できない場合は、Job起動不可。(故障時は選択不可)

-   「針あり左上一ヵ所」/「針なし左上一ヵ所」(RF11567)の場合、用紙サイズ・用紙紙質により、出力できない場合は、Job起動不可。(IOT
    Device Function編 参照)

-   排出先指定は無し。

-   針なし専用モードに設定されている場合、「針あり左上一ヵ所」の提供はコピーサービスと同じ(RF11567)。

#### 仕分け処理(コレート)の指定

###### 概要

複数部数印刷する際のIOTからの出力順序(コレート有無)を指定する。

###### 選択範囲

ソート(Collate)、スタック(Uncollate)

###### 初期値

ソート(Collate)

###### 制限・注意事項

###### 備考

-   仕分け処理指定が「スタック(Uncollate)」で、ステープルの指定が「ステープルする」の場合は、仕分け処理(コレート)の指定を、「ソート(Collate)」に変更する。

#### 両面印刷の指定

###### 概要

面付け、及び、「両面」指定時の見開き方法を指定する。

###### 選択範囲

片面、短辺綴じ両面印刷、長辺綴じ両面印刷

###### 初期値

片面

###### 制限・注意事項

-   両面モジュールが無効(未装着)の場合は、本機能は存在しない。

-   両面モジュール故障時は、両面印刷選択不可。

-   両面指定有りの場合、用紙サイズ・用紙紙質により、出力できない場合は、Job起動不可。(IOT
    Device Function編 参照)

-   両面指定有りの場合、用紙サイズが"SMH定形サイズ自動検知"の場合はJob起動不可。(IOT
    Device Function編 参照)

#### トレイ指定

###### 概要

給紙トレイを指定する。

###### 選択範囲

-   自動選択

-   Tray 1～Tray N

-   SMH
\[サイズ\]

-   自動

-   定形サイズ
あらかじめ登録された
プリセットサイズ(定形、または非定形)から選択可能。プリセットサイズの詳細は、16.3.2
Tools - Commonを参照。

-   非定型サイズ
IOT Device Function編 参照
\[紙質\]
IOT Device Function編 参照

###### 初期値

自動選択

SMHを選択した場合の初期値は以下となる。

\[サイズ\]

自動

-   非定形サイズ選択時の初期値は以下とする。
【mm】 主走査方向 = 200mm 副走査方向 = 200mm
【inch】 主走査方向 = 8.0" 副走査方向 = 8.0"

\[紙質\]
KOToolsで設定されている紙質

###### 制限・注意事項

-   選択範囲は、M/C構成に依存する。

-   APS無効時は、自動選択不可。(自動選択状態で、MediaPopup等により、APS無効となった場合はJob起動不可)

-   トレイ状態により、出力できない場合は、Job起動不可。(トレイ故障時は選択不可。但しSMHは標準装備、かつ故障検知がないため、常に選択可能)

-   ラストトレイインサートはサポートしない。

-   SMH画面では、用紙サイズと用紙紙質が禁則となる場合がある。(IOT Device
    Function編 参照) その場合は、設定不可。

-   SMHのレジが、サイドレジの場合、ガイド位置の戻し忘れを防ぐ目的で、ユーザーに対してレジガイドの設定を促すメッセージを表示する。

-   SMH+非定形サイズの場合、Job起動不可。(但し、非定型サイズの選択は可能)
    (CH11972)

-   Tray1～N/SMH選択によりDFW定義サイズ(A3/A4/A5/B4/B5/8.5x11/8.5x14/11x17)以外が給紙指定された場合、Job起動不可。(CH12156/2157)

#### N-up(Nアップ)

###### 概要

複数枚のイメージを指定した面数・順番に従って面付けを行い、1枚の用紙にプリントする。

###### 選択範囲

なし、2面、4面

面数を選択した場合、さらに配置方法として以下を指定する。
2面の場合 : 順方向(左から右)、逆方向(右から左)
4面の場合 :
順横方向(横並び/左上開始)、逆横方向(横並び/右上開始)、順縦方向(縦並び/左上開始)、逆縦方向(縦並び/右上開始)

###### 初期値

なし

配置方法の初期値は、それぞれ以下となる。

2面の場合 : 順方向(左から右)

4面の場合 : 順横方向(横並び/左上開始)

###### 制限・注意事項

#### カラーモード

###### 概要

カラーモードを指定する。

###### 選択範囲

自動、カラー、白黒

###### 初期値

自動

###### 制限・注意事項

-   本機能は、カラー機限定。白黒機では存在しない。

-   PGS1035SGPによるカラーモード制限はTBD

#### ログイン名

###### 概要

ログイン名を入力する。

###### 選択範囲

0～32Byte

###### 初期値

設定なし

###### 制限・注意事項

-   入力可能な文字は、ASCII。

-   ログイン名とパスワード共に未入力状態の場合は、Job起動不可。(CH12019)

#### パスワード

###### 概要

パスワードを入力する。

###### 選択範囲

0～32Byte

###### 初期値

設定なし

###### 制限・注意事項

-   入力可能な文字は、ASCII。

-   ログイン名とパスワード共に未入力状態の場合は、Job起動不可。(CH12019)

[1] (社)ビジネス機械・情報システム産業協会
OAシステム機器プロジェクト委員会で制定されたBMLinkS
Job/Device-Controlセキュリティ拡張標準仕様書に準拠した仕様

[2] 機種固有情報有り。(表示スペースの関係上
HB-UIはソート機能をサポートしない)

[3] システムデータは16.3.15 Tools-BMLinkSの章を参照。KO設定可能