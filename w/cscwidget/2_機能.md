2.0. 機能
====

CSCWidgetは、Java
ScriptのオープンソースフレームワークであるjQueryのプラグイン・モジュールとして動作する。

各Widgetは、画面上に操作部品を表示し、ユーザ操作に応じて表示状態を変更する機能を持つ。

2.1. オープンソースの利用
--------------------

CSCWidgetで利用するオープンソース・ソフトウェア、および動作保証するベースバージョンは以下の通りである。

利用するオープンソースとバージョン

<table>
<thead>
<tr class="header">
<th></th>
<th>Base Version</th>
<th>備考</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>jQuery</td>
<td>2.1.1</td>
<td></td>
</tr>
<tr class="even">
<td>jQuery UI(subset)</td>
<td>1.11.2</td>
<td><p>UI Core: Core, Widget, Mouse</p>
<p>Interactions: Draggable, Droppable, Sortable</p></td>
</tr>
<tr class="odd">
<td>textarea-caret-position</td>
<td>3.0.0</td>
<td>キーボードの実装に組み込まれて利用されている。</td>
</tr>
</tbody>
</table>

2.2. 表示要素の決定と構成
--------------------

Widgetの表示は、互いに依存関係を持たない以下の要素の組み合わせにより定められる。

-   Theme / 画面テーマ

    -   Widgetの塗りや形状を定める要素。

-   Size / 画面解像度

    -   Widgetの大きさ（幅・高さ）を定める要素。

-   Language / 表示言語

    -   テキストに使用する文字フォントを定める要素。

すべてのWidgetは、基本的にCSSの定義を変更することにより各表示要素の変更が可能となるように設計・実装されている。

ファイル構成との関係について、詳細は後述する。

2.3. 操作の受け付け
--------------

　Widgetは、各Widgetの項にて特筆されない限り、以下のように操作受付を判断する。

### 2.3.1. タップ

> アイテムへのタップは「リリースアクション」とする。
>
> リリースアクションを採用する理由については、過去機種の仕様であるタッチパネル式ジェスチャーUI機能仕様書の記載を参照のこと。
>
> タップは、以下に示す流れにて受け付けられる。

1.  アイテムをタッチする。タッチしたアイテムをタッチ対象と呼ぶ。

2.  押下中に見た目の変化を伴うアイテムでは、タッチ対象を押下中（プレス時）表示状態にする。

3.  タッチした部品から指を移動しない。ただし、部品外への移動であっても10px以内であれば、移動とはみなさないものとする。

4.  タッチリリースする。

5.  押下中に見た目の変化を伴うWidgetでは、タッチ対象の押下中表示状態を解除する。

6.  タッチ対象の押下時処理を実行する。

これより、

-   押下中に見た目の変化を伴うWidgetにて、アイテムをタッチした後、指を動かし、アイテム領域外でリリースした場合は、タッチ時に押下中表示状態になり、指を動かしている間も押下中表示状態が継続する。リリース時に押下中表示状態が解徐されるが、押下時処理は実行されない。

-   アイテムの領域外でタッチし、指を動かしてアイテム領域内に入った場合は、押下が検知されない。

> また、アイテム自体が無効状態（Disable）であった場合は、タッチによる見た目の変化は発生しない。
>
> タップの対象となる部品が、フリックの対象となるエリア上に置かれている場合に限り、フリック操作との判別のため、タッチ対象の押下中（プレス時）表示状態への移行までに130msecの遅延を行うものとする。

### 2.3.2. ダブルタップ・トリプルタップ

> 現仕様では、Widget自身がダブルタップ、トリプルタップ判断を行うことはない。
>
> 一部のWidgetでは、ダブルタップ、トリプルタップを受け付けるが、これはブラウザ仕様により判断される。

### 2.3.3. タッチアンドホールド

> タッチアンドホールドは、以下に示す流れにて受け付けられる。

1.  アイテムをタッチする。

2.  押下中に見た目の変化を伴うアイテムでは、タッチ対象を押下中（プレス時）表示状態にする。

3.  規定された時間、タッチした場所から指を移動しない。

4.  タッチアンドホールド対象の押下時処理を実行する。

5.  リリースする。

6.  押下中に見た目の変化を伴うWidgetでは、タッチ対象の押下中表示状態を解除する。

7.  タッチアンドホールド時に行う処理を終了する。

> タッチアンドホールドと検知されるまでの時間は、1secを標準とする。ただし、アイテムによって異なる値を採用するケースがあるため、必要に応じて各Widgetの仕様を参照のこと。

### 　2.3.4. ドラッグ

アイテムのドラッグは、以下に示す流れにて受け付けられる。

1.  アイテムをタッチする。

2.  押下中に見た目の変化を伴うアイテムでは、タッチ対象を押下中（プレス時）表示状態にする。

3.  タッチしたまま指を移動する。

4.  移動量に応じて、アイテムを移動する。

5.  指の移動を止める。

6.  リリースする。

7.  押下中に見た目の変化を伴うWidgetでは、タッチ対象の押下中表示状態を解除する。

8.  ドラッグ時に行う処理を終了する。

> 　詳細は、アイテムによって異なるため、必要に応じて各Widgetの仕様を参照のこと。

### 　2.3.5. フリック

アイテムのドラッグは、以下に示す流れにて受け付けられる。

1.  アイテムをタッチする。

2.  押下中に見た目の変化を伴うアイテムでは、タッチ対象を押下中（プレス時）表示状態にする。

3.  タッチしたまま指を移動する。

4.  移動量に応じて、アイテムを移動する。

5.  指の移動を止めずにリリースする。

6.  押下中に見た目の変化を伴うWidgetでは、タッチ対象の押下中表示状態を解除する。

7.  慣性スクロールを開始する。

8.  慣性スクロールが終了する。

> 詳細は、アイテムによって異なるため、必要に応じて各Widgetの仕様を参照のこと。

### 　2.3.6. ホイール

> 縦スクロール可能な部品は、マウスホイールによる上下移動が可能である。
